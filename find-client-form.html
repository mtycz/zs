<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>找甲方需求提交</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/axios/0.21.1/axios.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://www.jq22.com/jquery/font-awesome-5.15.2.all.css">
		<link rel="stylesheet" type="text/css" href="com.css"/>
	</head>
	<body class="bg-gray-100" onload="loadHeader()">

		<div class="container mx-auto px-4 py-16">
			<div class="flex items-center mb-6 cursor-pointer" onclick="goToOrderListingPage()">
				<i class="fas fa-arrow-left text-blue-500 mr-4"></i>
				<h1 class="text-2xl font-bold">返回订单列表</h1>
			</div>
			<script>
				function goToOrderListingPage() {
				window.location.href = 'order-listing-page.html';
			}
		</script>


			<div class="bg-white p-6 rounded-lg shadow-md max-w-4xl mx-auto">
				<h1 class="text-2xl font-bold mb-6">寻找客户</h1>
				<form id="clientForm" class="space-y-4">
					<div>
						<label for="name" class="block mb-1 text-sm font-medium">联系人姓名：<span class="text-red-500">*</span></label>
						<input type="text" id="name" name="f_lbt57bhha7j" class="w-full border rounded p-2 text-sm" required>
					</div>
					<div>
						<label for="phone" class="block mb-1 text-sm font-medium">手机号：<span class="text-red-500">*</span></label>
						<input type="tel" id="phone" name="f_nx04vljhdaj" class="w-full border rounded p-2 text-sm" required>
					</div>
					<div>
						<label for="email" class="block mb-1 text-sm font-medium">邮箱：<span class="text-red-500">*</span></label>
						<input type="email" id="email" name="f_39ct0iil8es" class="w-full border rounded p-2 text-sm" required>
					</div>
					<div>
						<label for="company" class="block mb-1 text-sm font-medium">公司/自媒体名称：<span class="text-red-500">*</span></label>
						<input type="text" id="company" name="f_25z6j9ms5rw" class="w-full border rounded p-2 text-sm" required>
					</div>
					<div>
						<label for="specialtyArea" class="block mb-1 text-sm font-medium">擅长领域：<span class="text-red-500">*</span></label>
						<div id="specialtyAreaDropdown" class="relative">
							<div id="specialtyAreaDisplay" class="w-full border rounded p-2 text-sm cursor-pointer bg-white">请选择擅长领域</div>
							<div id="specialtyAreaOptions" class="hidden absolute z-10 w-full mt-1 bg-white border rounded shadow-lg max-h-60 overflow-y-auto">
								<!-- 选项将通过 JavaScript 动态添加 -->
							</div>
						</div>
						<input type="hidden" id="specialtyAreaInput" name="f_wqit90xkemb">
					</div>
					<div>
						<label class="block mb-1 text-sm font-medium">视频时长/直播：<span class="text-red-500">*</span></label>
						<div class="space-x-4">
							<label class="inline-flex items-center">
								<input type="radio" name="f_87td2jqh959" value="30-60s" class="mr-2" required>
								<span class="text-sm">30-60s</span>
							</label>
							<label class="inline-flex items-center">
								<input type="radio" name="f_87td2jqh959" value="1min-3min" class="mr-2" required>
								<span class="text-sm">1min-3min</span>
							</label>
							<label class="inline-flex items-center">
								<input type="radio" name="f_87td2jqh959" value="3min-5min" class="mr-2" required>
								<span class="text-sm">3min-5min</span>
							</label>
							<label class="inline-flex items-center">
								<input type="radio" name="f_87td2jqh959" value="5min以上" class="mr-2" required>
								<span class="text-sm">5min以上</span>
							</label>
							<label class="inline-flex items-center">
								<input type="radio" name="f_87td2jqh959" value="直播" class="mr-2" required>
								<span class="text-sm">直播</span>
							</label>
						</div>
					</div>
					<div>
						<label for="requirements" class="block mb-1 text-sm font-medium">具体需求：<span class="text-red-500">*</span></label>
						<textarea id="requirements" name="f_pirusecacs0" class="w-full border rounded p-2 text-sm" rows="6" maxlength="500"
						 required placeholder="示例:
我方擅长信息流视频和广告宣传视频的制作。视频时长通常为 1 - 2 分钟，可根据需求配备字幕和配音。
从脚本创作到拍摄剪辑，再到后期制作、配音包装，我均可独立完成。收费标准通常为50元/条,会根据项目具体情况而定，需面议。
正常制作周期约为 5 个工作日，若您有特殊需求，制作周期也可进行适当调整，以满足您的期望。"></textarea>
						<div class="text-right text-sm text-gray-500"><span id="charCount">0</span> / 500</div>
					</div>
					<div class="text-right">
						<button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-sm">提交</button>
					</div>
				</form>
			</div>
		</div>

		<script type="module">
			import { globalUrl, globalAuthorization } from './TK.js';
			const specialtyAreas = {
				'新闻': ['时政', '社会'],
				'娱乐': ['综艺', '明星'],
				'影视': ['电影', '短片', '电视剧', '纪录片'],
				'音乐': ['MV', '音乐现场', '乐器演奏', '音乐教学', '达人翻唱'],
				'舞蹈': ['舞蹈教学', '舞蹈表演'],
				'游戏': ['竞技游戏', '休闲游戏', '桌游棋牌', '角色扮演'],
				'二次元': ['动画', '模玩手办', 'cosplay'],
				'美食': ['美食探店', '美食教学', '美食吃播', '美食测评'],
				'时尚': ['美妆美发', '护肤保养', '时尚穿搭', '潮流资讯', '时尚街拍'],
				'生活': ['生活妙招', '家居家装', '生活情趣'],
				'旅游': ['出行攻略', '游玩探店', '旅行日记', '自然风光', '风土人情'],
				'金融': ['股票', '基金', '保险', '期货', '商业', '房地产', '宏观经济'],
				'汽车': ['试驾测评', '改车玩车', '驾考交规', '汽车生活', '汽车知识'],
				'教育': ['学前教育', '学校教育', '职业教育'],
				'医疗健康': ['养生保健', '疾病治疗', '母婴健康', '医美整形'],
				'科技': ['电子数码', '软件应用', '智慧生活', '工程机械', '互联网+', '科技综合']
			};

			const specialtyAreaDisplay = document.getElementById('specialtyAreaDisplay');
			const specialtyAreaOptions = document.getElementById('specialtyAreaOptions');
			const specialtyAreaInput = document.getElementById('specialtyAreaInput');
			let selectedSpecialties = [];

			// 创建擅长领域选项
			Object.entries(specialtyAreas).forEach(([mainArea, subAreas]) => {
				const mainOption = document.createElement('div');
				mainOption.className = 'p-2 font-bold';
				mainOption.textContent = mainArea;
				specialtyAreaOptions.appendChild(mainOption);

				subAreas.forEach(subArea => {
					const subOption = document.createElement('div');
					subOption.className = 'p-2 pl-6 hover:bg-gray-100 cursor-pointer flex items-center';
					subOption.innerHTML =
						`
                    <input type="checkbox" value="${mainArea}-${subArea}" class="mr-2">
                    <span>${subArea}</span>
                `;
					specialtyAreaOptions.appendChild(subOption);
				});
			});

			// 切换下拉菜单显示
			specialtyAreaDisplay.addEventListener('click', () => {
				specialtyAreaOptions.classList.toggle('hidden');
			});

			// 处理选项选择
			specialtyAreaOptions.addEventListener('change', (e) => {
				if (e.target.type === 'checkbox') {
					const value = e.target.value;
					if (e.target.checked) {
						selectedSpecialties.push(value);
					} else {
						selectedSpecialties = selectedSpecialties.filter(item => item !== value);
					}
					updateSpecialtyDisplay();
				}
			});

			// 更新显示的选中内容
			function updateSpecialtyDisplay() {
				specialtyAreaDisplay.textContent = selectedSpecialties.length > 0 ?
					selectedSpecialties.join(', ') :
					'请选择擅长领域';
				specialtyAreaInput.value = selectedSpecialties.join(',');
			}

			// 点击外部关闭下拉菜单
			document.addEventListener('click', (e) => {
				if (!specialtyAreaDisplay.contains(e.target) && !specialtyAreaOptions.contains(e.target)) {
					specialtyAreaOptions.classList.add('hidden');
				}
			});

			// 字符计数
			const requirementsTextarea = document.getElementById('requirements');
			const charCountSpan = document.getElementById('charCount');

			requirementsTextarea.addEventListener('input', function() {
				charCountSpan.textContent = this.value.length;
			});

			// 表单提交处理
			document.getElementById('clientForm').addEventListener('submit', function(e) {
				e.preventDefault();

				const formData = new FormData(this);
				const data = Object.fromEntries(formData.entries());

				axios.post(`${globalUrl}/api/t_nrluz6sdm7w:create`, data, {
  headers: {
    'Content-Type': 'application/json',
    'Authorization': globalAuthorization
  }
})
.then(response => {
  alert('提交成功！稍后工作人员将会与您联系~');
  console.log(response.data);
})
.catch(error => {
  alert('提交失败，请重试。');
  console.error('Error:', error);
});
			});
		</script>
		<script src="com.js"></script>
	</body>
</html>
